import 'package:google_maps_flutter/google_maps_flutter.dart';import 'package:shiftapp/domain/entities/shared/date_formatter.dart';import 'package:shiftapp/presentation/presentationUser/transactions/presentation/view/widgets/reschedule_widget.dart';import 'package:shiftapp/presentation/shared/components/index.dart';import '../../../../../../utils/app_icons.dart';import '../../../../../adminFeatures/available_opportunities/presentation/widgets/build_popup_menu.dart';import '../../../../resources/colors.dart';import '../../../../resources/constants.dart';import '../../../data/models/reschedule_transactions_prams.dart';import '../../../data/models/update_transactions_prams.dart';import '../../../domain/entities/transaction_data.dart';class TransactionsItem extends BaseStatelessWidget {  Transactions data;  Function(UpdateTransactionsPrams update) onUpdate;  Function(RescheduleTransactionsPrams update) onReschedule;  TransactionsItem({required this.data,required this.onUpdate,required this.onReschedule});  @override  Widget build(BuildContext context) {    return Container(      padding: EdgeInsets.symmetric(horizontal: 5, vertical: 10),      margin: EdgeInsets.symmetric(horizontal: 10, vertical: 5),      decoration: Decorations.decorationTabBarView(radius: 10),      child: Column(        children: [          header(),          ListRowTextsIconsV2(            titleStyle: kTextRegular.copyWith(fontSize: 12, color: kGreen_7B),            items: [              ListRowTextItem(                title: strings.entity,                value: data.destination ?? "",                icon: AppIcons.diract,              ),              ListRowTextItem(                title: strings.working_period,                value:                    "${strings.from} ${getDate(data.startDateTime ?? "")}   ${strings.to} ${getDate(data.endDateTime ?? "")}",                icon: AppIcons.time8,              ),              ListRowTextItem(                title: strings.description,                value: data.description ?? "",                icon: AppIcons.desc,              ),            ],          ),       if(data.status == 1)   ...[            SizedBox(height: 10),            rescheduleButton(context),          ]        ],      ),    );  }  Widget header() {    return Row(      mainAxisAlignment: MainAxisAlignment.start,      crossAxisAlignment: CrossAxisAlignment.start,      children: [        kBuildCircleImage(data.freelancerProfileImage ?? "", size: 40),        SizedBox(width: 5),        Expanded(          child: Column(            mainAxisAlignment: MainAxisAlignment.start,            crossAxisAlignment: CrossAxisAlignment.start,            children: [              Text(                data.freelancerName ?? "",                style: kTextMedium.copyWith(fontSize: 15, color: kGreen_32),              ),              Text(                data.freelancerPhoneNumber ?? "",                style: kTextRegular.copyWith(fontSize: 12, color: kGreen_7B),              ),            ],          ),        ),        if(data.status == 1)  _OptionsMenuButton(onUpdate: onUpdate,onReschedule: onReschedule,data: data,),      ],    );  }  String getDate(String date) {    return DateFormatter.formatDateString(      date,      DateFormatter.TIME_STAMP,      DateFormatter.DATE_TIME_UI_3,    );  }  GestureDetector rescheduleButton(BuildContext context) {    return GestureDetector(      onTap: () {        showAppModalBottomSheet(          title: strings.reschedule,          isScrollControlled: false,          isDivider: false,          context: context,          child: RescheduleWidget(isReschedule: true,data: data,onReschedule: onReschedule,onUpdate:onUpdate ,),        );      },      child: Container(        decoration: Decorations.decorationOnlyRadius(          color: kPrimary,          radius: 10,        ),        child: IconText(          mainAxisAlignment: MainAxisAlignment.center,          icon: AppIcons.reschedule,          text: strings.reschedule,          textStyle: kTextRegular.copyWith(fontSize: 14, color: kWhite),          crossAxisAlignment: CrossAxisAlignment.start,          iconSize: 20,          padding: EdgeInsets.symmetric(vertical: 8),        ),      ),    );  }}class _OptionsMenuButton extends BaseStatelessWidget {  Transactions data;  Function(UpdateTransactionsPrams update) onUpdate;  Function(RescheduleTransactionsPrams update) onReschedule;  _OptionsMenuButton({required this.data,required this.onUpdate,required this.onReschedule});  @override  Widget build(BuildContext context) {    TextStyle titleStyle = kTextBold.copyWith(fontSize: 10, color: kGreen_54);    return OptionsMenuButton(      options: [        BuildPopupMenuItemContent(          title: strings.update_transactions,          titleStyle: titleStyle,          isDivider: false,        ),      ],      onSelect: (value) async {        if (value == 0) {          showAppModalBottomSheet(            title: strings.update_transactions,            isScrollControlled: false,            isDivider: false,            context: context,            child: RescheduleWidget(isReschedule: false,data: data,onReschedule: onReschedule,onUpdate:onUpdate ,),          );        }      },    );  }}